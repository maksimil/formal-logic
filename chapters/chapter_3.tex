\part{Элементы теории множеств}

{\it Множество}\index{множество} --- неопределимое понятие в рамках формальной системы,
обычно оно интерпретируется как совокупность объектов,
называемых {\it элементами множества}\index{элемент!множества}\index{элемент}.
В теории множеств каждый терм --- множество.

Введём в алфавит бинарный предикатный знак $\in$. Формула ${x\in S}$ читается
как ``$x$ --- элемент $S$'' или ``$x$ {\it лежит}
\index{лежать в множестве, $\in$} в $S$''.

Пусть $P(x)$ --- формула о $x$. Можно сказать, что $P(x)$ описывает какое-то
свойство $x$.
Формулы, описывающие свойство каждого элемента множества или
существование элемента с каким-то свойством обычно записывают в сокращённом виде:
\[
	(\forall x\in S)~P(x)\qquad
	\exists x\in S:P(x)\qquad \exists!x\in S:P(x)
\]
Они читаются как ``$P(x)$ для произвольного $x$ из $S$'' и
``существует (единственный) $x$ в $S$ такой, что $P(x)$'' соответственно.

Например, пусть $\N$ --- множество натуральных чисел, тогда
\[
	(\forall n\in\N)~\exists m\in\N:n+1=m
\]
читается как ``для любого натурального числа $n$ существует натуральное число
$m$ такое, что $n+1=m$''.

Важно понимать, что единственный новый знак, который вводится в теории множеств
это $\in$. Операции пересечения и объединения, понятие подмножества, пустое множество,
множество $\{a\}$ нужно будет сформулировать через него.

ZF (Zermelo-Fraenkel)\index{ZF (Zermelo-Fraenkel)} --- набор аксиом
Цермело-Френкеля, обычно с ними также
используется Аксиома Выбора. Аксиомы ZF с Аксиомой Выбора
обозначаются как ZFC (ZF, axiom of Choice)\index{ZFC (ZF, axiom of Choice)}.
ZFC --- одна из наиболее широко используемых систем аксиом теории множеств.

\section{Равенство множеств и операции на множествах}

Введём новый бинарный предикатный знак $\subseteq$.
\[
	a\subseteq b\equiv \forall x(x\in a\implies x\in b)
\]
${a\subseteq b}$ читается как $a$ --- {\it подмножество}
\index{подмножество, $\subseteq$} $b$, то есть все
элементы множества $a$ лежат в $b$. Отношение $\subseteq$ также называют
{\it отношением включения}\index{включение, $\subseteq$}.

Введём первую аксиому ZFC --- {\it Аксиому Объёмности}\index{Аксиома!Объёмности}:
\begin{equation}\label{eq:ax_ext_1}
	(\forall x)(\forall y)[(\forall z)(z\in x\iff z\in y)\implies x=y]
\end{equation}
или, другими словами
\begin{equation}\label{eq:ax_ext_2}
	\forall x\forall y[x\subseteq y\land y\subseteq x\implies x=y]
\end{equation}

\textsc{Такие аксиомы формализуют, что мы понимаем под равенством объектов.}
Например, для векторов равенство можно ввести аксиомой
$(\forall \vec{a},\vec{b})~
	\big[\vec{a}\upuparrows\vec{b}\land|\vec{a}|=|\vec{b}|\big]
	\implies \vec{a}=\vec{b}$.

Можем сделать \textsc{важнейшее наблюдение в теории множеств: Множество $S$
	определяется только необходимым и достаточным условием формулы $x\in S$,
	которое называют условием множества $S$.
	Определив такой $P(x)$, что $P(x)\iff x\in S$, мы полностью определим множество.
	Множество полностью определяется своим условием.}\index{условие множества}

Введём остальные аксиомы ZFC. Из них следуют\footnote{
	Данная книга не будет углубляться в сами аксиомы ZFC, но я сильно реккомендую
	ознакомиться с ними самостоятельно.}
формулы
\[
	\forall x\forall y\exists z:\forall w(w\in z\iff w\in x\land w\in y)
\]
\[
	\forall x\forall y\exists z:\forall w(w\in z\iff w\in x\lor w\in y)
\]
Единственность таких $z$ можно доказать следующим образом:
\[
	w\in z_1\iff w\in x\land w\in y\iff w\in z_2,
\]
тогда $z_1=z_2$ по первой аксиоме.

Можем ввести бинарные функциональные знаки $\cap$, $\cup$ и аксиомы
\[
	\forall x\forall y\forall w(w\in x\cap y\iff w\in x\land w\in y)
\]
\[
	\forall x\forall y\forall w(w\in x\cup y\iff w\in x\lor w\in y)
\]
$A\cap B$ называется {\it пересечением} $A$ и $B$
\index{пересечение множеств, $\cap$},
$A\cup B$ --- их {\it объединением}\index{объединение множеств, $\cup$}.

Очевидно, если $P_{A}(x)$ --- условие $A$, а $P_{B}(x)$ --- условие $B$,
то $P_{A}(x)\land P_{B}(x)$ --- условие $A\cap B$.

\vspace{1em}
{\it Теорема:} ${\forall R\forall S(R\subseteq S\implies R\cap S=R\land R\cup S=S)}$.
Обычно такие теоремы формулируют более подробно:
``Пусть $R,S$ --- множества и $R\subseteq S$, тогда $R\cap S=R$ и $R\cup S=S$''.

{\it Доказательство:}

Пусть $R\subseteq S$.
\[
	t\in R\cap S\iff t\in R\land t\in S\xLeftrightarrow{t\in R\implies t\in S} t\in R
\]

Тогда $(\forall x)(x\in R\cap S\iff x\in R)$ и $R\cap S=R$.
\[
	t\in R\cup S\iff t\in R\lor t\in S\iff t\in S
\]

Тогда $R\cup S=S$.\qed

\newcommand\eset{\varnothing}
\vspace{1em}
{\it Упражнения:}
\begin{enumerate}
	\item{}Доказать эквивалентность \eqref{eq:ax_ext_1} и \eqref{eq:ax_ext_2}.

	\item{}Пусть $C$ --- множество, содержащее все элементы $A$, не лежащие в $B$.
	Записать необходимое и достаточное условие $x\in C$.

	\item{}Пусть $P_{A}(x), P_{B}(x),P_{C}(x)$ --- условия $A,B$ и $C$ соответственно.
	Выразить через них следующие формулы:
	\[
		A\subseteq B\qquad A=B\qquad
		C=A\cap B\qquad C=A\cup B\qquad
		C\cap A=C\cap B
	\]

	\item{}Доказать теоремы
	\begin{fullwidth}
		\begin{multicols}{2}
			\begin{enumerate}
				\item{}$\forall S(S\cup S=S)$
				\item{}$\forall R\forall S\forall T[R\cap (S\cup T)=(R\cap S)\cup (R\cap T)]$
				\item{}$\forall S\forall T[S\cap (S\cup T)=S\cup (S\cap T)=S]$
				\item{}$\forall R\forall S\forall T[R\subseteq T
							\implies R\cup (S\cap T)=(R\cup S)\cap T]$
			\end{enumerate}
		\end{multicols}
	\end{fullwidth}


	\item{}Доказать, что для множеств $A$ и $B$ следующие утверждения эквивалентны
	(любые два утверждения эквивалентны).
	\[
		A\subseteq B\qquad A\cup B=B\qquad A\cap B=A
	\]
\end{enumerate}

\section{Конструкции из множеств}

Из аксиом ZFC следует, что для $n>0$ справедливо
\[
	\forall a_1...\forall a_{n}\exists !A:\forall w
		[w\in A\iff (w=a_1\lor...\lor w=a_{n})],
\]
тогда введём $n$-арный функциональный знак\footnote{
	То есть мы вводим функциональный знак для каждого натурального числа.}
$\{,\}$ и аксиому
\[
	\forall a_1...\forall a_{n}\forall w
	[w\in \{a_1,a_2,...,a_{n}\}\iff (w=a_1\lor ...\lor w=a_{n})]
\]

Из ZFC следует ${\exists !e:\forall x(x\notin e)}$\footnote{
	см. упражнение~\ref{ex:eset_only}.},
можем ввести константу $\eset$ и аксиому $\forall x(x\notin \eset)$.
$\eset$ называется {\it пустым множеством}
\index{пустое множество}\index{множество!пустое}.

На основе теории множеств можно построить многие другие области математики.
Например, натуральные числа можно определить следующим образом:
\[ \begin{array}{llll}
		0 :=\eset\qquad & 1  :=\{\eset\}\qquad & 2  :=\{\eset,\{\eset\}\}\qquad & ... \\
		                & 1:=\{0\}\qquad       & 2:=\{0,1\}
		                & n:=\{0,1,...,n-1\}
	\end{array}
\]
То есть $\sigma(x):=x\cup \{x\}$ --- функция следования,
возвращающая следующее натуральное число. Заметим, что ``количество''\footnote{
	Формально понятие количества элементов в конечных множествах определяется
	через такие натуральные числа.} элементов
в множестве $n$ равно $n$. Из аксиом ZFC следует как существование множества
всех таких натуральных чисел (аксиома бесконечности), так и принцип индукции.
Множество натуральных чисел с $0$ обычно обозначают как $\N_0$,
без $0$ --- $\N$.
\index{множество!натуральных чисел!без 0, $\N$}
\index{множество!натуральных чисел!с 0, $\N_0$}

Часто в математике нужно понятие {\it упорядоченного множества}~---~множества,
\index{множество!упорядоченное}\index{упорядоченное множество}
в котором определён порядок элементов. Порядок элементов
конечного упорядоченного множества можно
определить, просто записав его элементы в строку.
Упорядоченное множество из двух элементов (упорядоченную пару)
\index{упорядоченная пара}
можно определить так:
\[
	(x,y):=\{\{x\},\{x,y\}\}
\]
Множество
всех таких пар, где первый элемент из множества $X$, а второй элемент
из множества $Y$ называется {\it декартовым произведением}
\index{декартово произведение, $\times$} множеств
$X$ и $Y$ и
обозначается $X\times Y$, то есть
\[
	z\in X\times Y\iff \exists x\in X,y\in Y:z=(x,y)
\]
Декартово произведение $A\times A$ также называют {\it декартовым квадратом}
\index{декартов квадрат}
и обозначают $A^{2}$. Существование декартова произведения следует из ZFC.

Упорядоченную тройку и другие упорядоченные множества из $n$ элементов
можно определить так:
\[
	(x,y,z):=((x,y),z)\qquad (x_1,...,x_{n}):=((x_1,...,x_{n-1}),x_{n})
\]
Тогда $X\times Y\times Z=(X\times Y)\times Z$ содержит все такие тройки.
Аналогично определяются $X_1\times X_2\times ...\times X_{n}$ и $X^{n}$.

Из аксиом ZFC следует существование множества всех подмножеств множества $A$.
Его обозначают как $2^{A}$ или $\mathcal P(A)$ и оно определяется аксиомой
\[
	\forall A\forall \alpha(\alpha\in 2^{A}\iff \alpha\subseteq A)
\]

Определим способ выделения подмножеств множества.
Из Аксиомы Выделения\index{Аксиома!Выделения}\index{выделение подмножества}
\footnote{Её правильнее нужно называть {\it схемой аксиом}\index{схема аксиом},
потому что она определяет по аксиоме для каждой подходящей формулы $\varphi$.}
ZFC следует, что для каждой формулы $\varphi$, в которой свободны
только $x_1,...,x_{n},w,A$, справедливо
\[
	\forall x_1....\forall x_{n}\forall A\exists B:\forall w(w\in B\iff
	w\in A\land \varphi),
\]
то есть существует $B$, содержащее все $w\in A$ такие, что $\varphi$.
Обычно такое построение множества $B$ записывают так:
\[
	B=\left\{w\in A\;\big|\;\varphi\right\}\qquad
	\forall w(w\in B\iff w\in A\land \varphi)
\]

\newcommand\Z{\mathbb Z}
Множество целых чисел обозначают как $\Z$\index{множество!целых чисел, $\Z$}.
Пустым местом будем обозначать произведение. Тогда
множество всех чётных целых чисел можно определить так:
\[
	\Z_{E}=\left\{x\in\Z\;\big|\;\exists z\in\Z:x=2z\right\}
\]

Особый случай выделения подмножества --- {\it разность множеств} $A$ и $B$.
\[
	A\setminus B:=\left\{a\in A\;\big|\; a\notin B\right\}
\]
Тогда множество нечётных целых чисел можно определить так:
\[
	\Z'_{E}:=\Z\setminus \Z_E
\]

Рассмотрим задачу: как определить пересечение и объединение
всех множеств в множестве $U$, где $U$ может быть бесконечно?
Очевидно, определить это пересечение через бинарные $\cup$ и $\cap$
возмножно только для конечных $U$.
Введём (из аксиом ZFC следуют необходимые формулы) унарные $\cup$, $\cap$
и аксиомы
\[
	\forall U\forall x(x\in \cap U\iff \forall u(u\in U\implies x\in u))
\]
\[
	\forall U\forall x(x\in \cup U\iff \exists u(u\in U\land x\in u))
\]
Заметим, что
\[
	\cup \{A,B\}=A\cup B\qquad \cap \{A,B\}=A\cap B,
\]
причём эти равенства можно принять как определения для бинарных $\cup$ и $\cap$.
Заметим связь между $\land$ и $\forall$ и между $\lor$ и $\exists$.

Таким образом, мы определили основные способы построения множеств:
объединение, пересечение, выделение подмножества, разность.
Важно помнить их условия (см. таблицу~\ref{table:set_def}).

\vspace{1em}
{\it Упражнения:}
\begin{enumerate}
	\item{}Пусть $A=\{a,c\}$ и $B=\{b,c\}$. Какие элементы лежат в следующих
	множествах:
	\[
		A\cup B\qquad A\cap B\qquad A\setminus B\qquad
		A\times B
	\]
	\item{}Доказать теоремы
	\begin{enumerate}
		\item{}$[\exists e:\forall x(x\notin e)]\implies
			[\exists!e:\forall x(x\notin e)]$ \label{ex:eset_only}
		\item{}$\forall x[\{x,x\}=\{x\}]$
		\item{}$\forall x\forall y[x\neq y\iff (x,y)\neq (y,x)]$
		\item{}$\forall x_1\forall y_1\forall x_2\forall y_2
			[(x_1,y_1)=(x_2,y_2)\iff (x_1=x_2\land y_1=y_2)]$
		\item{}$\forall A\forall B[A\setminus B=\eset\iff A\subseteq B]$
		\item{}$\forall A\forall B\forall a\forall b
				[(a,b)\in A\times B\iff a\in A\land b\in B]$
		\item{}$\forall A\forall B\forall C\forall D
				[(A\times B)\cap (C\times D)=(A\cap C)\times (B\cap D)]$
	\end{enumerate}
	\item{}Объяснить определения унарных $\cup$ и $\cap$
	и связь между логическими знаками $\land$, $\forall$, $\lor$ и $\exists$.
	\item{}{\it Симметричная разность}\index{симметричная разность}
	множеств $A$ и $B$ определяется следующим образом:
	\[
		A\Delta B:=(A\setminus B)\cup (B\setminus A)
	\]
	\begin{enumerate}
		\item{}Найти условие $A\Delta B$.
		\item{}Доказать, что для произвольных $A$ и $B$ справедливы
		\begin{enumerate}
			\item{}$A\Delta B=(A\cup B)\setminus (A\cap B)$
			\item{}$A\Delta B=B\Delta A$
		\end{enumerate}
		\item{}Пусть $A=\{a,c\}$ и $B=\{b,c\}$. Какие элементы лежат в $A\Delta B$?
	\end{enumerate}
\end{enumerate}
