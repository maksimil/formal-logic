\part{Вывод теорем}

\section{Формальная система}

Совокупность правил называется {\it формальной системой}, если выполняются следующие
условия:
\begin{enumerate}
	\item{}Задан {\it алфавит} для составления {\it выражений}.
	\item{}Определено понятия {\it формулы}.
	\item{}Задана совокупность формул, называемых {\it аксиомами}.
	\item{}Заданы {\it правила вывода теорем}.
\end{enumerate}

Если формула $T$ выводима из формул $A_1,A_2,...,A_{n}$ за один шаг (одно применение
правил вывода), то пишут $A_1,A_2,...,A_{n}\vdash T$. Порядок формул
не имеет значения: если $A,B\vdash T$, то и $B,A\vdash T$.
Могут быть и излишние формулы: если $A\vdash T$, то и $A,B\vdash T$.

\newcommand\ruleR{\mathbf{R}}
\newcommand\ruleC{\mathbf{C}}

Рассмотрим следующий пример формальной системы:
\begin{enumerate}
	\item{}Алфавит: $a$, $b$, $c$.
	\item{}Всякое непустое выражение является формулой.
	\item{}Аксиомы: $aab$, $c$.
	\item{}Правила вывода:
	\begin{enumerate}
		\item[($\ruleR$)]{}$A\vdash A'$, если $A'$ можно получить из $A$,
		убрав один символ\footnote{Тогда $aab\vdash ab$ и $ab\vdash b$.}.
		\item[($\ruleC$)]{}$A,B\vdash AB$, если у формул $A$ и $B$ нет
		общих символов\footnote{Тогда $b,c\vdash bc$ и $ac,bb\vdash acbb$.}.
	\end{enumerate}
\end{enumerate}

\newcommand\Sx{\mathcal S}
\newcommand\Cx{\mathcal C}
Возьмём совокупность формул $\Sx$. Пусть
\[
	\Sx\vdash A_1\qquad
	\Sx,A_1\vdash A_2\qquad...\qquad
	\Sx,A_1,A_2,...,A_{n-1}\vdash A_{n}
\]

Тогда пишут $\Sx\to A_{n}$ и говорят, что $A_{n}$ {\it доказуемо} из $\Sx$\footnote{
	Заметим, что $A\vdash B$ подразумевает $A\to B$.
}.
Рассуждения, показывающие доказуемость называются {\it доказательством}.
Если $\Sx$~---~совокупность аксиом и $\Sx\to T$, то $T$ называют
{\it теоремой}.

{\it Теорема:} $abc$

{\it Доказательство:}
$aab\vdash ab$ по правилу $\ruleR$, значит $aab,c\vdash ab$.
$ab,c\vdash abc$ по правилу $\ruleC$, значит $aab,c,ab\vdash abc$.
Тогда $aab,c\to abc$ и $abc$ --- теорема, потому что $aab$ и $c$ --- аксиомы.
\qed\footnote{$\qed$ означает ``что и требовалось доказать''.}

Доказуемость можно показать и с помощью рассуждений в {\it нормальном виде}:
Для доказательства $\Sx\to T$ можно предположить формулы из $\Sx$ и последовательно
увеличивать список выведенных формул, пока не дойдём до $T$.

\pagebreak

Доказательство $abc$ в нормальном виде:
\begin{enumerate}[label=(\arabic*)]
	\item{}Предположим $aab$.\label{exproof:1}
	\item{}Предположим $c$.\label{exproof:2}
	\item{}$ab$ по $\ruleR$, \ref{exproof:1}.\label{exproof:3}
	\item{}$abc$ по $\ruleC$, \ref{exproof:3}, \ref{exproof:2}.
\end{enumerate}

Тогда $aab,c\to abc$.\qed

\textsc{формальная система является просто набором правил и её формулы
	могут не иметь смысла. Они и не будут иметь смысла, пока мы не начнём их
	интерпретировать, то есть придавать им этот смысл.}

В общем случае формальные системы не обращаются с понятиями ``истины'' и ``лжи'',
они обращаются с понятиями ``выводимости''. Но для удобства определим формулу
как {\it истинную}, если она является аксиомой или теоремой\footnote{
	Если $F$ --- истинная формула, то её истинность исходит из
	определения формальной системы, поэтому такие $F$ принято называть тавтологиями.
}.

Важно понимать связь между понятием истины в формальных системах
и эмпиричной истины\footnote{Эмпиризм --- метод познания через ощущение (наблюдение).}.
Физики подбирают аксиомы (постулаты),
из которых выводимы теоремы (законы), соответствующие наблюдениям.
Они подгоняют истину формальной системы к эмпиричной истине.

Математики же
в большинстве областей подгоняют формальную систему так,
чтобы она соответствовала интуитивной логике,
что не всегда получается: понятие ``импликации'' в математике не совпадает
с понятием ``следствия'' интуитивной логики. Следствие
нередко подразумевает причинно-следственную
связь, импликация же такой связи не подразумевает (например, ${p\implies(q\implies p)}$).

\section{Правила вывода}

Сформулируем формальную систему, в которой мы будем работать.
Алфавит будет состоять из букв различиных человеческих языков, символов $\top$,
$\bot$, а также $\lnot$, $\implies$, $\land$, $\lor$. Кванторы и равенство пока
что вводить не будем.

Формулу определим следующим образом: если $A$, $B$ --- формулы, то формулами
являются выражения $\lnot A$, ${A\implies B}$, $A\land B$, $A\lor B$.
$\top$ и $\bot$ также являются формулами\footnote{
	Заметим, что не каждый символ является формулой, в отличие от определения
	формулы в первой главе.
}.

Возьмём $\top$ как аксиому и введём правила вывода:

\newcommand\taut{$\mathcal T$}
\newcommand\axiom{$\mathcal A$}
\newcommand\conj{$\mathcal C$}
\newcommand\implic{$\mathcal I$}
\begin{enumerate}
	\item[(\axiom)]{}$S\vdash A$, где $A$ --- аксиома, $S$ --- любая формула.
	\item[(\taut)]{}$S\vdash T$, если ${[S\implies T]}$ --- тавтология.
	\item[(\conj)]{}$A,B\vdash A\land B$.
	\item[(\implic)]{}${\Gamma\vdash (S\implies T)}$, если $[\Gamma,S\to T]$, где $\Gamma$
	--- совокупность формул.
\end{enumerate}

\pagebreak

Правило \axiom{} позволяет проще использовать аксиомы в рассуждениях.
\taut{} позволяет использовать тавтологии в рассуждениях.
\conj{} позволяет объединять несколько утвержедний в одно.
\implic{} позволяет доказывать импликацию.

На данный момент мы ввели 3 стрелочки:
\begin{enumerate}
	\item{}$\vdash$ означает выводимость за 1 шаг.
	\item{}$\to$ означает существование доказательства.
	\item{}$\implies$ --- символ из алфавита формальной системы.
\end{enumerate}

% Заметим, что по правилу \taut{} и тавтологии ${A\iff (A=\top)}$
% существуют правила $A\vdash [A=\top]$ и $[A=\top]\vdash A$,
% значит понятие истины в формальной системе и $\top$ равносильны.

Рассмотрим пример доказательства.

{\it Теорема:} Для формул $A$, $B$ и $C$\footnote{
	Уточнение, что $A$, $B$, $C$ --- формулы необходимо, чтобы формула, которую
	нужно доказать была формулой.
} справедливо
\[
	[(A\implies B)\land (A\implies C)]\implies (A\implies B\land C)
\]

{\it Доказательство:}
\begin{enumerate}[label=(\arabic*)]
	\item{}Предположим $(A\implies B)\land (A\implies C)$.\label{exproof:1}

	\item{}Предположим $A$.\label{exproof:2}

	\item{}По \taut{} и тавтологии $(p\land q)\implies p$ имеем
	$p\land q\vdash p$, значит из \ref{exproof:1} можем вывести
	$A\implies B$ и $A\implies C$.\label{exproof:3}

	\item{}По \conj{}, \ref{exproof:2}, \ref{exproof:3}
	имеем $A\land (A\implies B)$ и $A\land (A\implies C)$
	\label{exproof:4}

	\item{}По \taut{} и тавтологии $(p\land (p\implies q))\implies q$
	имеем $p\land (p\implies q)\vdash q$, значит из \ref{exproof:4} можем вывести $B$
	и $C$.\label{exproof:5}

	\item{}$B\land C$ по \conj{}, \ref{exproof:5}.\label{exproof:6}

	\item{}Рассуждения \ref{exproof:1}-\ref{exproof:6} показывают
	$\ref{exproof:1},\ref{exproof:2}\to \ref{exproof:6}$, значит по правилу
	\implic{} $\ref{exproof:1}\vdash [\ref{exproof:2}\implies \ref{exproof:6}]$,
	тогда имеем $A\implies B\land C$.\label{exproof:7}

	\item{}Для краткости обозначим формулу
	$(A\implies B)\land (A\implies C)$ буквой $\alpha$,
	а $(A\implies B\land C)$ --- буквой $\beta$.
	Рассуждения \ref{exproof:1}-\ref{exproof:7} показывают $\alpha\to\beta$,
	а значит и $[\top,\alpha\to\beta]$, тогда по правилу \implic{}
	имеем $\top\vdash [\alpha\implies\beta]$.\qed
\end{enumerate}

Обычно доказательства формулируются более свободно,
но при непонимании некоторого доказательства имеет смысл попробовать
его записать в нормальном виде.

На данный момент понятие значения переменной играет малую роль в построении теории.
Оно нужно только для определения набора тавтологий для правила \taut{}.
Абстрагируемся от понятия значения переменной: заменим \taut{} следующим
набором правил.
\begin{tabular}{rl|rl}
	($\land$I)       & правило \conj{}                                          &
	($\land$E)       & $A\land B\vdash A$ или $A\land B\vdash B$                  \\
	($\lor$I)        & $A\vdash A\lor B$ или $B\vdash A\lor B$                  &
	($\lor$E)        & $(A\lor B)\land (A\implies C)\land(B\implies C)\vdash C$   \\
	($\Rightarrow$I) & правило \implic{}                                        &
	($\Rightarrow$E) & $A\land (A\implies B)\vdash B$                             \\
	($\bot$I)        & $A\land\lnot A\vdash \bot$                               &
	($\bot$E)        & $\bot\vdash A$                                             \\
	($\lnot$I)       & $(A\implies \bot)\vdash \lnot A$                         &
	($\lnot$E)       & $(\lnot A\implies \bot)\vdash A$                           \\
\end{tabular}

Такие правила для произвольного
символа $\lambda$ называются следующим образом: $\lambda$I --- {\it правило
введения}, $\lambda$E --- {\it правило исключения (использования)}\footnote{
	I --- Introduction, введение.

	E --- Elimination, исключение.
}. $\top$ можно определить как $\lnot\bot$.
Предыдущее доказательство использует $\land$E на шаге \ref{exproof:3}
и $\Rightarrow$E на шаге \ref{exproof:5}.

Теперь формальная система полностью абстрагирована от понятия значения переменной.
Все правила являются просто операциями со строками, не зависящими от смысла
этих строк. Это позволяет нам более свободно и интуитивно интерпретировать, то
есть придавать смысл этим строкам. Но для завершения нам предстоит ввести правила
для $=$, $\forall$ и $\exists$.

\section{Равенство}

\section{Кванторы}

Для кванторов вводятся свои правила вывода.

\newcommand\Aii{$\forall$I}
\newcommand\Aee{$\forall$E}
\newcommand\Eii{$\exists$I}
\newcommand\Eee{$\exists$E}
\begin{enumerate}
	\item[(\Aii)]{}Из ``для произвольного $t$ выводимо $P(t)$''
	выводимо $(\forall x)P(x)$.
	\item[(\Aee)]{}$(\forall x)P(x)\vdash P(t)$, где $t$ --- произвольная переменная.
	\item[(\Eii)]{}$P(t)\vdash [\exists x:P(x)]$
	\item[(\Eee)]{}$[\exists x:P(x)], [(\forall x)(P(x)\implies C)]\vdash C$
\end{enumerate}

Теперь мы можем формально доказать законы отрицания кванторов,
которые мы вводили как определения.

\phantomsection\label{wordproof}
{\it Теорема:}
$(\forall x)P(x)\implies \lnot[\exists x:\lnot P(x)]$

{\it Доказательство:}

Предположим $(\forall x)P(x)$. Предположим $\exists x:\lnot P(x)$.

Возьмём произвольное $t$. $P(t)$ по \Aee. Тогда $\lnot P(t)\implies\bot$.

По \Aii{} можно сделать вывод $(\forall x)(\lnot P(x)\implies\bot)$.
Тогда по \Eee{} из предположения ${\exists x:\lnot P(x)}$ можно вывести $\bot$,
значит оно неверно\footnote{
	Доказательство от обратного. Если из $A$ можно прийти к противоречию, то $\lnot A$.
} и из предположения $(\forall x)P(x)$
можно вывести $\lnot[\exists x:\lnot P(x)]$.

Можем сделать вывод, что $(\forall x)P(x)\implies \lnot[\exists x:\lnot P(x)]$.
\qed

Обычно для доказательств достаточно интуитивно понимать кванторы,
но важно знать, откуда эта интуиция берётся.

{\it Упражнения:}

\begin{enumerate}
	\item{}Привести доказательство ${(\forall x)P(x)\implies \lnot[\exists x:\lnot P(x)]}$
	к нормальному виду.
	\item{}Обосновать правила вывода кванторов.
	\item{}Обосновать правила на с.~\pageref{deduction_rules}.
\end{enumerate}

\pagebreak

\part{Примеры формальных систем}

\section{Элементы теории множеств}

Рассмотрим примеры доказательств в теории множеств.

{\it Множество} --- совокупность значений, называемых {\it элементами множества}.
Логическое утверждение $x\in S$ означает ``$x$ --- элемент множества $S$''.

Введём новые значения переменных: все множества $S$, для которых для
всякого значения $x$ логическое утверждение ${x\in S}$ имеет определённое
значение\footnote{Существуют и другие способы определить
	понятие множества, например аксиомы ZFC. Я сильно реккомендую
	хотя бы ознакомиться с ними после прочтения книги.}.
Если $S$ содержит только элементы $a_1,a_2,...$, то пишут $S=\{a_1,a_2,...\}$.
$\varnothing:=\{\}$.

Определим следующие понятия для множеств\footnote{Заметьте схожесть между операциями
	над множествами и логическими операциями.}:
\begin{enumerate}
	\item{}$A$ --- подмножество $B$ (${A\subseteq B}$ или $B\supseteq A$) означает
	\[
		(\forall x)~x\in A\implies x\in B
	\]

	\item{}Множества $A$ и $B$ равны ($A=B$) тогда и только тогда, когда
	$A\subseteq B\land B\subseteq A$.
	То есть \textsc{множество определяется его элементами и ничем более}\footnote{
		В целом, если для двух значений определено понятие равненства,
		то имеется в виду, что значение такого рода определяется только этими
		свойствами.

		Например, следующее утверждение для векторов:
		\[
			\vec{a}=\vec{b}\iff\left[|\vec{a}|=|\vec{b}|\land
				\vec{a}\upuparrows\vec{b}\right]
		\]

		Означает, что вектор определяется длиной (модулем) и направлением.
	}.

	\item{}Пересечение множеств $A$ и $B$ --- такое множество $A\cap B$, что
	\[
		(\forall x)~x\in A\cap B\iff(x\in A\land x\in B)
	\]

	\item{}Объединение множеств $A$ и $B$ --- такое множество $A\cup B$, что
	\[
		(\forall x)~x\in A\cup B\iff (x\in A\lor x\in B)
	\]

	\item{}Разность множеств $A$ и $B$ --- такое множество $A\setminus B$, что
	\[
		(\forall x)~x\in A\setminus B\iff (x\in A\land \lnot(x\in B))
	\]
\end{enumerate}

{\it Теорема:} если $S$ --- множество, то $S\cap S=S$\footnote{
	Технически, ``если $S$ --- множество'' можно опустить, но если
	мы введём $\cap$ например, для чисел, то это уточнение станет необходимым.
}.

{\it Доказательство:}

$S\cap S=S$ тогда и только
тогда, когда ${(\forall x)(x\in S\cap S\iff x\in S)}$,
значит это утверждение и нужно доказать.

Возьмём произвольное $t$. Предположим $t\in S\cap S$.
\[
	t\in S\cap S\implies (t\in S\land t\in S)\implies t\in S
\]

То есть $t\in S\cap S\implies t\in S$\footnote{Используется
	тавтология
	\[
		[p\implies q]\land[q\implies t]\implies [p\implies t]
	\]

	Думаю вы уже со школы знакомы с цепочками импликаций.
}.

Предположим $t\in S$.
\[
	t\in S\implies (t\in S\land t\in S)\implies t\in S\cap S
\]

То есть $t\in S\implies t\in S\cap S$ и $t\in S\iff t\in S\cap S$.

По \Aii{} можем вывести $(\forall x)(x\in S\iff x\in S\cap S)$.\qed

\pagebreak

У большинства доказательств следующие шаги:
\begin{enumerate}
	\item{}Раскрыть определения, чтобы выяснить, какое утверждение нужно доказать.
	\item{}Применить логические операции и преобразования, чтобы вывести это утверждение.
	\item{}Если застряли, попробовать доказать от обратного.
\end{enumerate}

{\it Упражнения:}
\begin{enumerate}
	\item{}Доказать следующие утверждения для всяких множеств $R,S,T$
	\begin{enumerate}
		\item{}$S\cup S=S$
		\item{}$R\cap (S\cup T)=(R\cap S)\cup (R\cap T)$
		\item{}$S\cap (S\cup T)=S\cup (S\cap T)=S$
		\item{}$R\subseteq T\implies R\cup (S\cap T)=(R\cup S)\cap T$
	\end{enumerate}

	\item{}Доказать, что для множеств $A$ и $B$ следующие утверждения эквивалентны:
	\[
		A\subseteq B\qquad A\cup B=B\qquad A\cap B=A
		\qquad (\forall x)~\lnot(x\in A\setminus B)
	\]
	\item{}Обосновать альтернативное определение пустого множества:
	\[
		(\forall x)\lnot(x\in \varnothing)
	\]

	Как можно схожим образом определить множества $\{a\}$, $\{a,b\}$,
	$\{a_1,a_2,...,a_{n}\}$?
	\item{}*Возьмём совокупность множеств $U=\{U_{1},U_{2},...\}$.
	Как можно определить объединение, пересечение всех множеств в совокупности?
	Как это сделать, если $U$ бесконечно?
\end{enumerate}

\section{Аксиомы Пеано}

Рассмотрим пример системы\footnote{
	Система, совокупность, класс и набор --- синонимы, а множество --- более формальное
	понятие, обычно определённое аксиомами ZFC.
} аксиом, определяющей натуральные числа: {\it аксиомы Пеано}.

\newcommand\N{\mathbb{N}}
Множество $\N$ с функцией следования $\sigma$\footnote{$\sigma(x)$ нельзя определить
	как $x+1$, потому что операция сложения не была введена.},
определённой для всякого $x\in\N$
называется {\it множеством натуральных чисел}, если для него
выполняются {\it Аксиомы Пеано}:
\begin{enumerate}
	\item{}$1\in \N$
	\item{}$x\in\N\implies \sigma(x)\in\N$
	\item{}$(\forall x\in\N)~\sigma(x)\neq 1$
	\item{}$(\forall a,b\in\N)(\sigma(a)=\sigma(b)\implies a=b)$
	\item{}$P(1)\land [(\forall n\in\N)~(P(n)\implies P(\sigma(n)))]
		\implies(\forall n\in\N)~P(n)$\footnote{На этой аксиоме основаны
		доказательства по индукции.}
\end{enumerate}

\pagebreak

Введём существование такого множества как аксиому, а
все его элементы как
возможные значения переменных\footnote{Множество натуральных чисел можно
	получить и из множеств:
	\[
		1:=\{\varnothing\}\qquad\sigma(x):=x\cup \{x\}
	\]
	\[
		\N:=\{1,\sigma(1),...\}
	\]

	Существование такого множества следует из
	аксиомы бесконечности ZFC (см. в интернете).}.

Обозначим за $F(n)$ следующее утверждение: ${n\in\N}$ можно представить как
$n=\sigma(\sigma(...\sigma(1)))$, причём это выражение конечно.

{\it Теорема:} $(\forall n\in\N)~F(n)$.

	{\it Доказательство:}

$1\in\N$ можно представить как $1$, значит $F(1)$.

Возьмём произвольное $n$ и предположим $F(n)$, тогда $\sigma(n)$ тоже
представимо в виде $\sigma(\sigma(...\sigma(1)))$, то есть $F(\sigma(n))$.

По \Aii{} можем вывести $(\forall n\in\N)(F(n)\implies F(\sigma(n)))$.

Применим аксиому $4$ и выведем $(\forall n\in\N)~F(n)$.\qed

{\it Упражнения:}
\begin{enumerate}
	\item{}Доказать $(\forall n\in\N)~1<n\lor n=1$, если $<$ определено как
	\begin{enumerate}
		\item{}$(\forall a\in\N)~a<\sigma(a)$
		\item{}$(\forall a,b,c\in\N)~(a<b\land b<c)\implies a<c$
	\end{enumerate}
	\item{}Доказать $a<b\land b<a\implies a<a$\footnote{
		Заметьте, что в данном случае $<$ не соответствует вам известному понятию $<$,
		введённому в школе.
	}.
	\item{}*Определить операцию сложения двух натуральных чисел.
	\item{}*Определить операцию умножения двух натуральных чисел.
\end{enumerate}
