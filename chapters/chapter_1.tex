\part{Предисловие}

Между школьной и университетской математиками существует категорическое
различие: в школе математика рассматривается как определённый ``закон природы'',
то есть $1+1=2$ потому что это так. В университете же математика изучается
в рамках формальной системы с чётко определёнными правилами.

\textsc{Университетская математика вводит аксиомы, из которых выводит теоремы,
в отличие от школьной математики, которая
в основном строится на интуитивных рассуждениях.}

Данная книга стремится доступно и точно сформулировать понятия аксиомы,
теоремы, доказательства и дать необходимый фундамент для построения
интуитивного понимания математических формул.

В тексте достаточно много сносок, они содержат важные оговорки,
улучшающие понимание материала. В качестве практики
после некоторых глав предложены упражнения. Упражнения с повышенной сложностью
отмечены~*.
По всем вопросам обращайтесь по адресу {\sl kksenya758@gmail.com}.

\part{Основные понятия}

\section{Формулы и выражения}

\textsc{Центральным понятием в математике является формула.}
Определим это понятие.

Определим {\it алфавит} --- совокупность знаков\footnote{
	Используется слово ``знак'', а не ``символ'', потому что некоторые знаки
	состоят из нескольких символов. Например, $x_1$, $x_2$.},
на котором формулы будут записаны. Его можно разделить на четыре части:
\begin{enumerate}
	\item{}{\it Знаки переменных} --- буквы латинского,
		греческого и других алфавитов с индексами, различными значками и без.

		Например, $x,y,z,z_1,x_2,\hat x,a'$.

	\item{}{\it Знаки функций и отношений} --- знаки, обозначающие
		различиные функции ($\sin$, $+$) и отношения ($=$, $\leq$, $\in$).

	\item{}{\it Логические знаки} --- знаки ``и'', ``или'', следстивия и прочие.

	\item{}{\it Знаки препинания} --- скобки\footnote{
			Данная книга не будет углубляться в детали расставления скобок.
		}, запятые, двоеточия и прочие.
\end{enumerate}

{\it Выражение} --- любая последовательность знаков алфавита.
Выражение не обязательно имеет смысл, но определённым выражениям мы его придаём,
интерпретируя их.

Если $\varphi$ обозначает выражение $a_1a_2...a_{n}$,
где $a_1,..,a_{n}$ --- знаки алфавита, то пишут ${\varphi\equiv a_1a_2...a_{n}}$.
Если ${\varphi\equiv a_1...a_{n}}$ и ${\psi\equiv b_1...b_{m}}$,
то $\varphi\psi\equiv a_1...a_{n}b_1...b_{m}$.

% Скобки в данном случае помогают определить порядок
% применения правил определения значения:
% \begin{enumerate}
%   \item{}${(a\land b)=\lnot b}$,
%   если $a\land b$ и $\lnot b$ имеют одно значение.
%   \item{}$a\land b$ и $\lnot b$ имеют одно значение, если
%   $a=\bot$ и $b=\top$.
% \end{enumerate}

{\it Формула} --- выражение, соответсвующее определённому утверждению, высказыванию
(например, $1+1=2$). Более точно её можно определить следующим образом:
\begin{enumerate}
	\item{}$\top$ (истина, тавтология) и $\bot$ (ложь, противоречие) --- формулы.
	\item{}Если выражения $A,B$ --- формулы, то выражения
		\[
			\lnot A\qquad A\land B\qquad A\lor B\qquad A\implies B\qquad A\iff B
		\]
		тоже являются формулами.
\end{enumerate}
Позже мы введём правила, по которым выражения
вида ${a=b}$ являются формулами.

Формулы соответствуют утверждениям, поэтому можно говорить об их {\it истинности}.
Определим формулу $\top$ как истинную, а $\bot$ как ложную и
сформулируем правила определения истинностей формул с логическими знаками.
\begin{enumerate}
	\item{}И ($\land$). $p\land q$ истинна тогда и только тогда, когда $p$ и $q$ истинны.

		То есть $p\land q$ истинна, если $p$ и $q$ истинны,
		и ложна иначе. Обычно слова ``$A$ истинна'' сокращают до ``$A$''.

	\item{}Или ($\lor$). $p\lor q$ ттк\footnote{тогда и только тогда, когда} $p$ или $q$.

	\item{}Отрицание ($\lnot$). $\lnot p$ ттк $p$ ложно.

	\item{}Следствие, импиликация ($\implies$).

		$p\implies q$ ттк $p$ ложно или $q$ истинно.

	\item{}Равносильность, эквивалентность ($\iff$).

		$(p\iff q)$ ттк $p\implies q$ и $q\implies p$.
\end{enumerate}

Чтобы лучше понимать формулы нужно уметь их переводить на человеческий язык. Делается
это последовательной заменой логических знаков
их аналогами из таблицы~\ref{table:read_form}.
\begin{margintable}
	\begin{tabular}{cl}
		$p\land q$    & $p$ и $q$                 \\\hline
		$p\lor q$     & $p$ или $q$               \\\hline
		$\lnot p$     & не $p$                    \\\hline
		$p\implies q$ & если $p$, то $q$          \\
		& из $p$ следует $q$        \\
		& для $q$ достаточно $p$    \\
		& для $p$ необходимо $q$    \\
		& $q$ всякий раз, когда $p$ \\\hline
		$p\iff q$     & $p$ эквивалентно $q$      \\
		& $p$ равносильно $q$       \\
		& $p$ ттк $q$               \\\hline
		$\top$        & истина                    \\\hline
		$\bot$        & ложь                      \\
		& противоречие
	\end{tabular}
	\caption{Аналоги формул}\label{table:read_form}
\end{margintable}

Например,
\begin{enumerate}
	\item{}$(A\land (A\implies B))\implies B$
	\item{}Из $A\land (A\implies B)$ следует $B$
	\item{}Из $A$ и $(A\implies B)$ следует $B$
	\item{}Из $A$ и ``для $B$ достаточно $A$'' следует $B$
\end{enumerate}

\pagebreak

Выражение из знаков переменных и знаков $\top$, $\bot$, $\land$, $\lor$, $\lnot$,
$\implies$ и $\iff$ называется {\it простой тавтологией}, если
\begin{multicols}{2}
	\begin{enumerate}
		\item{}Оно является формулой, когда все её переменные (знаки переменных)
			являются формулами.
			\columnbreak
		\item{}Оно истинно при любых определённых истинностях переменных.
	\end{enumerate}
\end{multicols}

Заметим, что проверить, является ли выражение простой тавтологией,
можно за конечное количество шагов: достаточно просто перебрать все возможные истинности
переменных.
Например, ${(A\land (A\implies B))\implies B}$ --- формула, когда $A,B$ --- формулы.
Существует $4$ варианта определённых истинностей формул $A$ и $B$,
их перебор можно организовать таблично (см. таблицу~\ref{table:taut_check}).
\begin{margintable}
	\begin{tabular}{cc|c}
		$A$    & $B$    & $F$    \\\hline
		$\top$ & $\top$ & $\top$ \\
		$\top$ & $\bot$ & $\top$ \\
		$\bot$ & $\top$ & $\top$ \\
		$\bot$ & $\bot$ & $\top$
	\end{tabular}

	\vspace{0.5em}
	$F\equiv{(A\land (A\implies B))\implies B}$

	\caption{Перебор истинностей $A$ и $B$}\label{table:taut_check}
\end{margintable}

\vspace{1em}
{\it Упражнения:}

\begin{enumerate}
	\item{}Показать, что следующие выражения --- простые тавтологии\label{ex:simple_taut}
		\begin{enumerate}
			\item{}$\top$\footnote{Знак $\top$ по этой причине называется
				знаком элементарной тавтологии.}
			\item{}$p\lor (\lnot p)$ --- закон исключённого третьего
			\item{}$(p\land p)\iff p$
			\item{}$(p\land (p\implies q))\implies q$ --- modus ponens (лат. правило вывода)
			\item{}$(\lnot q\land (p\implies q))\implies \lnot p$ --- modus tollens
				(от противного)
			\item{}$\lnot(p\lor q)\iff (\lnot p)\land (\lnot q)$ --- закон Де Моргана
			\item{}$(\lnot(p)\land p)\iff\bot$\footnote[][-10mm]{
					Знак $\bot$ по этой причине называется
					знаком элементарного противоречия.

					Его можно определить через $\lnot$ и $\land$.
					\[
						\bot\equiv \lnot \xi\land \xi
					\]
				}
			\item{}$p\implies (q\implies p)$\footnote{
					Наиболее справедливой интерпретацией ${p\implies q}$ будет
					``$q$ всякий раз, когда $p$''.
					\textsc{Математическое следствие не подразумевает причинность.}
				}
			\item{}${(p\implies q)\iff ((\lnot q)\implies (\lnot p))}$
			\item{}$(p\implies\bot)\iff \lnot p$\footnote[][1mm]{
					На этой тавтологии основаны
					доказательства от противного. Если из $\lnot S$ мы приходим
					к противоречию, то $S$.

					Также знак $\lnot$ можно определить через $\implies$ и $\bot$.
					\[
						\lnot\eta\equiv \eta\implies \bot
					\]
				}
			\item{}$\bot \implies p$
		\end{enumerate}
	\item{}Являются ли следующие выражения простыми тавтологиями,
		если $T$ --- простая тавтология?
		\begin{enumerate}
			\item{}$\top \implies T$
			\item{}$\top \iff T$\footnote{
					Знак $\top$ можно определить через произвольную простую тавтологию,
					например,
					\[
						\top\equiv \xi\implies (\eta\implies \xi)
					\]
				}
			\item{}$(T \land (T\implies b))\implies b$
		\end{enumerate}
	\item{}Обосновать словесные интерпретации формул из таблицы~\ref{table:read_form},
		дополнить таблицу своими примерами.
	\item{}Обосновать определение $p\implies q$ как $(\lnot p)\lor q$.
	\item{}Прочитать выражения из упражнения~\ref{ex:simple_taut}.
\end{enumerate}

\pagebreak

\section{Термы}

{\it Терм} --- выражение, соотвествующее какому-то объекту.
Например, $x$, $x+1$, $1$.

Для формулирования высказываний о термах вводятся {\it предикатные знаки}.
Они соотвествуют сравнениям термов.
{\it Арность} знака --- количество его аргументов.
Предикаты могут быть любых неотрицательных арностей, например,
\begin{enumerate}
	\item{}$0$-арные предикаты (константы): знаки $\top$ и $\bot$.
	\item{}$2$-арные (бинарные) предикаты: $=$, $\leq$, $<$, $>$.
\end{enumerate}
Предикаты также часто называют отношениями.

Расширим понятие формулы: Если $\phi$ --- $n$-арный предикатный знак,
а $t_1,...,t_{n}$ --- термы, то $\phi(t_1,...,t_{n})$ --- формула.

Для описывания операций над термами вводятся {\it функциональные знаки}.
Они соотвествуют различным функциям. Функциональные знаки могут быть любых
неотрицательных арностей:
\begin{enumerate}
	\item{}$0$-арные функции (константы). Например, $1$, $2$.
	\item{}$1$-арные (унарные) функции. Например, $\sin$, $\cos$.
	\item{}$2$-арные (бинарные) функции. Например, $+$, $-$, $\cdot$, $\times$.
\end{enumerate}

Теперь можем точно определить понятие терма:
\begin{enumerate}
	\item{}Любой знак переменной --- терм.

	\item{}Если $f$ --- $n$-арный функциональный знак и $t_1,...,t_{n}$ --- термы,
		то выражение $f(t_1,...,t_{n})$ --- терм.
\end{enumerate}

{\it Константа} --- $0$-арный функциональный или предикатный знак.
{\it Переменная} --- терм из одного знака,
не являющийся константой.
Если $\psi$ --- $n$-арный функциональный или предикатный знак, то в выражении
$\psi(t_1,...,t_{n})$ термы $t_1,...,t_{n}$ называют {\it аргументами}.

При интерпретации формул термы соответствуют объектам, а формулы --- высказываниям
об этих объектах. Объекты, которым соответствуют термы определяются изучаемой
областью математики. Например, в теории множеств всякий терм --- множество.

\section{Кванторы}

Добавим в язык возмножность формулировать утверждения о существовании
какого-то объекта и о всеобщности какого-то свойства для всех рассматриваемых объектов.
Введём в алфавит логические знаки $\forall$ и $\exists$
(кванторы всеобщности существования).

\pagebreak

Будем говорить, что переменная $\gamma$
\begin{multicols}{2}
	\begin{enumerate}
		\item{}{\it Связанна} в формуле $F$, если $F$ содержит
			выражение $K\gamma$, где $K$~---~квантор.
			\columnbreak
		\item{}{\it Свободна} в формуле $F$, если $F$ содержит $\gamma$,
			но $\gamma$ не связанна в $F$.
	\end{enumerate}
\end{multicols}
% {\it связанна} в формуле, если эта формула содержит выражение $K\gamma$,
% где $K$ --- квантор. Если формула $F$ содержит переменную $\gamma$ и $\gamma$
% не связанна в $F$, то она {\it свободна} в $F$.

Если переменная $\gamma$
не связанна в формуле $F$\footnote{
	То есть либо $F$ не содержит $\gamma$, либо $\gamma$ свободна в $F$.},
то $F$ --- {\it формула (утверждение) о} $\gamma$. Если формула не имеет
свободных переменных, то её называют {\it замкнутой}.
Например, $F\equiv x=2$ --- формула о $x$ и $x$ свободна в $F$.
Заметим, что формула $F$ также является формулой об $y$, причём $F$ не содержит $y$.

Расширим понятие формулы: Пусть $F$ --- формула о $x$, тогда ${(\forall x)F}$
и ${\exists x:F}$ --- формулы. $(\forall x)F$ соответствует
``$F$ для всякого (произвольного, любого) $x$'', $\exists x:F$ ---
``Существует такой $x$, что $F$''.

Например, если мы введём бинарный предикатный знак $=$, то выражение
$\forall a~\exists!b:a=b$ является формулой, потому что ${\exists! b:a=b}$ и
${a=b}$ --- формулы, потому что $a,b$ --- термы, и $=$ --- бинарный предикатный знак.

Часто формулы с кванторами сокращают:
\begin{fullwidth}
	\begin{multicols}{2}
		\begin{enumerate}
			\item{}Формулу ${(\forall x)(Q\implies R)}$ можно сократить
				до ${(\forall x:Q)R}$, что читается как ``$R$ для всякого $x$ такого,
				что $Q$''.

			\item{}${(\forall x:x\prec a)P}$ можно сократить до ${(\forall x\prec a)P}$,
				где вместо $\prec$ могут быть знаки $>$, $\in$ и прочие.

				Формулу ${(\forall x\prec a)P}$ часто читают как
				``$P$ для всякого $x\prec a$''.

			\item{}$\exists x:[(x\prec a)\land P]$ можно сократить
				до $\exists x\prec a:P$.

				Формулу ${\exists x\prec a:P}$ часто читают как
				``Существует такой $x\prec a$, что $P$''.

				\columnbreak

			\item{}Части с одинаковыми кванторами можно объединить:
				формулу $(\forall x)(\forall y)P$ можно записать как $(\forall x,y)P$,
				а ${\exists x:(\exists y:P)}$ --- как $\exists x,y:P$.

			\item{}Скобки вокруг $\forall x$ можно опустить,
				если после него следует $\exists$ или выражение в скобках.
				То есть ${(\forall \varepsilon)\exists \delta:P}$
				можно сократить до $\forall \varepsilon~\exists \delta:P$,
				а $(\forall x)(x=x)$ до $\forall x(x=x)$.
				% Последнее часто используется для формулирования аксиом.

			\item{}Некоторые авторы опускают ``$:$'' после $\exists$ и
				ставят выражение $\exists x$ в скобки: $(\forall a)(\exists b)P$.
		\end{enumerate}
	\end{multicols}
\end{fullwidth}

Например, формулу
\newcommand\N{\mathbb N}
\[
	(\forall r)~r\in\N\implies \exists n:n\in\N\land n>r,
\]
где $x\in\N$ ттк $x$ --- натуральное число, можно записать как
\[
	\forall r\in\N~\exists n\in\N:n>r\quad\text{или}\quad
	(\forall r\in\N)(\exists n\in\N)~n>r
\]

Последнюю формулу можно прочитать как ``Для произвольного натурального числа
$r$ существует такое натуральное $n$, что $n>r$''.

Для кванторов выполняются\footnote{
	На данный момент мы не можем их доказать, а только
	обосновать словесно (см. упражнение~\ref{ex:quantor_neg_def}).

	На данный момент мы ничего не можем доказать, потому что мы не ввели
	понятие доказуемости.}
следующие {\it законы отрицания}:
\[
	\lnot[(\forall x)~P]\iff[\exists x:\lnot P]\qquad
	\lnot[\exists x:P]\iff[(\forall x)~\lnot P]
\]

Если переменная $\gamma$ связанна в формуле $F$, то её буква не имеет значения.
Например, следующие две формулы эквивалентны:
\[
	(\forall p)~(p\implies (q\implies p))\qquad
	(\forall \chi)~(\chi\implies (q\implies\chi))
\]

Введём обозначение для замены знаков в выражениях.
Возьмём выражение $P$, заменим в ней все выражения $\alpha$ выражением $\beta$ и
обозначим полученное выражение как $P(\beta/\alpha)$, что читается как
``$P$ $\beta$ вместо $\alpha$''.
Если мы заменяем не все $\alpha$ выражением $\beta$, то можем обозначить полученное
выражение как $P(\beta/'\alpha)$.
Например, $Q\equiv x+y=2y$, тогда $Q(t/y)\equiv x+t=2t$ и $Q(t/'y)$ может
обозначать любое из выражений
\[
	x+y=2y\qquad x+t=2y\qquad x+y=2t\qquad x+t=2t
\]

Если $P$ --- формула о $x$, то часто вводят обозначения
\[
	P(x)\equiv P\qquad P(t)\equiv P(t/x)
\]

Если формула содержит две формулы, и какая-то переменная
связанна в обоих, то эти два использования
одного знака не имеют друг к другу никакого отношения.
Например, следующие две формулы эквивалентны:
\[
	[(\forall x)P(x)]\land[\exists x:Q(x)]\qquad
	[(\forall \alpha)P(\alpha)]\land[\exists \beta:Q(\beta)],
\]

\phantomsection{}\label{page:exists_only}
Можем ввести в алфавит {\it квантор существования и единственности} $\exists!$.
Расширим понятие формулы: Пусть $P$ --- формула о $x$,
тогда ${\exists! x:P}$ --- формула. Определим его следующим образом:
\[
	[\exists! x:P(x)]\iff[\exists x:P(x)]\land
	[\forall x\forall y(P(x)\land P(y)\implies x=y)]
\]
Также введём сокращение
\[
	\exists! x\prec a:P(x)\equiv \exists! x:x\prec a\land P(x)
\]

\vspace{1em}
{\it Упражнения:}
\begin{enumerate}
	\item{}Обосновать на основе словесных рассуждений законы отрицания
		кванторов\label{ex:quantor_neg_def}. Вывести законы отрицания формул
		$p\land q$ и $p\lor q$, заметить схожесть с законами отрицания кванторов.
	\item{}Записать отрицание формулы
		\[
			\forall \varepsilon>0~\exists \delta>0:
			(\forall x)~[|x|<\delta\implies |f(x)|<\varepsilon],
		\]
		где $f$ --- числовая функция.

		Подсказка:
		${\lnot[\exists a:(\forall b)P]\iff(\forall a)\lnot[(\forall b)P]\iff
		(\forall a)(\exists b:\lnot P)}$,
		где $A\iff B\iff C$ означает $A\iff B$ и $B\iff C$.

	\item{}Объяснить условие единственности:
		\[
			\forall x\forall y(P(x)\land P(y)\implies x=y)
		\]
\end{enumerate}
